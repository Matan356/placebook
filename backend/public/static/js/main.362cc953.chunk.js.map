{"version":3,"sources":["shared/context/auth-context.js","shared/components/UIElements/LoadingSpinner.js","shared/components/UIElements/Backdrop.js","shared/hooks/auth-hook.js","shared/components/Navigation/MainHeader.js","shared/components/Navigation/NavLinks.js","shared/components/Navigation/SideDrawer.js","shared/components/Navigation/Footer.js","shared/components/Navigation/MainNavigation.js","App.js","index.js"],"names":["AuthContext","createContext","isLoggedIn","userId","token","login","logout","LoadingSpinner","props","className","asOverlay","Backdrop","ReactDOM","createPortal","onClick","document","getElementById","logoutTimer","MainHeader","children","NavLinks","auth","useContext","to","end","SideDrawer","content","CSSTransition","in","show","timeout","classNames","mountOnEnter","unmountOnExit","Footer","MainNavigation","useState","drawerIsOpen","setDrawerIsOpen","closeDrawerHandler","Fragment","id","href","alt","xmlns","width","height","viewBox","d","Users","React","lazy","NewPlace","UserPlaces","UpdatePlace","Auth","App","routes","setToken","tokenExpirationDate","setTokenExpirationDate","setUserId","useCallback","uid","expirationDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","removeItem","window","location","useEffect","remainingTime","setTimeout","clearTimeout","storedData","parse","getItem","useAuth","path","element","Provider","value","fallback","render","StrictMode"],"mappings":"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","file":"static/js/main.362cc953.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\nexport const AuthContext = createContext({\n  isLoggedIn: false,\n  userId: null,\n  token: null,\n  login: () => {},\n  logout: () => {},\n});\n ","import React from 'react';\n\nimport './LoadingSpinner.css';\n\nconst LoadingSpinner = props => {\n  return (\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\n      <div className=\"lds-dual-ring\"></div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './Backdrop.css';\n\nconst Backdrop = props => {\n  return ReactDOM.createPortal(\n    <div className=\"backdrop\" onClick={props.onClick}></div>,\n    document.getElementById('backdrop-hook')\n  );\n};\n\nexport default Backdrop;\n","import { useState, useCallback, useEffect } from 'react';\n\nlet logoutTimer;\n\nexport const useAuth = () => {\n  const [token, setToken] = useState(false);\n  const [tokenExpirationDate, setTokenExpirationDate] = useState();\n  const [userId, setUserId] = useState(false);\n\n  const login = useCallback((uid, token, expirationDate) => {\n    setToken(token);\n    setUserId(uid);\n    const tokenExpirationDate =\n      expirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\n    setTokenExpirationDate(tokenExpirationDate);\n    localStorage.setItem(\n      'userData',\n      JSON.stringify({\n        userId: uid,\n        token: token,\n        expiration: tokenExpirationDate.toISOString()\n      })\n    ); \n  }, []);\n\n  const logout = useCallback(() => {\n    setToken(null);\n    setTokenExpirationDate(null);\n    setUserId(null);\n    localStorage.removeItem('userData');\n    window.location.href=\"/\";\n  }, []);\n  \n\n  useEffect(() => {\n    if (token && tokenExpirationDate) {\n      const remainingTime = tokenExpirationDate.getTime() - new Date().getTime();\n      logoutTimer = setTimeout(logout, remainingTime);\n    } else {\n      clearTimeout(logoutTimer);\n    }\n  }, [token, logout, tokenExpirationDate]);\n\n  useEffect(() => {\n    const storedData = JSON.parse(localStorage.getItem('userData'));\n    if (\n      storedData &&\n      storedData.token &&\n      new Date(storedData.expiration) > new Date()\n    ) {\n      login(storedData.userId, storedData.token, new Date(storedData.expiration));\n    }\n  }, [login]);\n\n  return { token, login, logout, userId };\n};","import React from 'react';\n\nimport './MainHeader.css';\n\nconst MainHeader = props => {\n  return <header className=\"main-header\">{props.children}</header>;\n};\n\nexport default MainHeader;\n","import React, { useContext } from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nimport { AuthContext } from \"../../context/auth-context\";\nimport \"./NavLinks.css\";\n\nconst NavLinks = (props) => {\n  const auth = useContext(AuthContext);\n\n  return (\n    <ul className=\"nav-links\">\n      <li>\n        <NavLink to=\"/\" end>\n          ALL USERS\n        </NavLink>\n      </li>\n      {auth.isLoggedIn && (\n        <li>\n          <NavLink to={`/${auth.userId}/places`}>MY PLACES</NavLink>\n        </li>\n      )}\n      {auth.isLoggedIn && (\n        <li>\n          <NavLink to=\"/places/new\">ADD PLACE</NavLink>\n        </li>\n      )}\n      {!auth.isLoggedIn && (\n        <li>\n          <NavLink to=\"/auth\">AUTHENTICATE</NavLink>\n        </li>\n      )} \n      {auth.isLoggedIn && (\n        <li>\n          <button  onClick={auth.logout}> LOGOUT</button>\n        </li>\n      )}\n    </ul>\n  );\n};\n\nexport default NavLinks;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport \"./SideDrawer.css\";\n\nconst SideDrawer = (props) => {\n  const content = (\n    <CSSTransition\n      in={props.show}\n      timeout={200}\n      classNames=\"slide-in-left\"\n      mountOnEnter\n      unmountOnExit\n    >\n      <aside className=\"side-drawer\" onClick={props.onClick}>\n        {props.children}\n      </aside>\n    </CSSTransition>\n  );\n\n  return ReactDOM.createPortal(content, document.getElementById(\"drawer-hook\"));\n};\n\nexport default SideDrawer;\n","import React from 'react';\r\n\r\nimport './Footer.css'\r\n\r\nconst Footer = (props) => {\r\n  return <div>\r\n   <footer className=\"main-footer\">{props.children}</footer>;\r\n\r\n  </div>;\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport MainHeader from \"./MainHeader\";\nimport NavLinks from \"./NavLinks\";\nimport SideDrawer from \"./SideDrawer\";\nimport Backdrop from \"../UIElements/Backdrop\";\nimport Footer from \"./Footer\";\nimport \"./MainNavigation.css\";\n\nconst MainNavigation = (props) => {\n  const [drawerIsOpen, setDrawerIsOpen] = useState(false);\n\n  const openDrawerHandler = () => {\n    setDrawerIsOpen(true);\n  };\n\n  const closeDrawerHandler = () => {\n    setDrawerIsOpen(false);\n  };\n\n  return (\n    <React.Fragment>\n      {drawerIsOpen && <Backdrop onClick={closeDrawerHandler} />}\n      <SideDrawer show={drawerIsOpen} onClick={closeDrawerHandler}>\n        <nav className=\"main-navigation__drawer-nav\">\n          <NavLinks />\n        </nav>\n      </SideDrawer>\n\n      <MainHeader>\n        <button\n          className=\"main-navigation__menu-btn\"\n          onClick={openDrawerHandler}\n        >\n          <span />\n          <span />\n          <span />\n        </button>\n        <h1 className=\"main-navigation__title\">\n          <Link to=\"/\">YourPlaces</Link>\n        </h1>\n        <nav className=\"main-navigation__header-nav\">\n          <NavLinks />\n        </nav>\n      </MainHeader>\n\n      <Footer>\n        <div className=\"main-footer\">\n          <div className=\"social-links\">\n            <div className=\"social-btn flex-center\" id=\"linkedin\">\n              <a href=\"https://www.linkedin.com/in/matan-elgrabli/\" alt=\"git\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"24\"\n                  height=\"24\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path d=\"M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z\" />\n                </svg>\n              </a>\n              <span>My LinkedIn</span>\n            </div>\n\n            <div className=\"social-btn flex-center\" id=\"github\">\n              <a href=\"https://github.com/Matan356\" alt=\"git\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"24\"\n                  height=\"24\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path d=\"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z\" />\n                </svg>\n              </a>\n              <span>My GitHub</span>\n            </div>\n          </div>\n        </div>\n      </Footer>\n    </React.Fragment>\n  );\n};\n\nexport default MainNavigation;\n","import { Route, Routes } from \"react-router-dom\";\nimport React, { Suspense } from \"react\";\n\nimport MainNavigation from \"./shared/components/Navigation/MainNavigation\";\nimport { AuthContext } from \"./shared/context/auth-context\";\nimport { useAuth } from \"./shared/hooks/auth-hook\";\nimport LoadingSpinner from \"./shared/components/UIElements/LoadingSpinner\";\n\nconst Users = React.lazy(() => import(\"./user/pages/Users\"));\nconst NewPlace = React.lazy(() => import(\"./places/pages/NewPlace\"));\nconst UserPlaces = React.lazy(() => import(\"./places/pages/UserPlaces\"));\nconst UpdatePlace = React.lazy(() => import(\"./places/pages/UpdatePlace.js\"));\nconst Auth = React.lazy(() => import(\"./user/pages/Auth\"));\n\nconst App = () => {\n  const { token, login, logout, userId } = useAuth();\n\n  let routes;\n\n  if (token) {\n    routes = (\n      <>\n        <Route path=\"/\" element={<Users />} end></Route>\n        <Route path=\"/:userId/places\" element={<UserPlaces />} end></Route>\n        <Route path=\"/places/new\" element={<NewPlace />} end></Route>\n        <Route path=\"/places/:placeId\" element={<UpdatePlace />}></Route>\n      </>\n    );\n  } else {\n    routes = (\n      <>\n        <Route path=\"/\" element={<Users />} end></Route>\n        <Route path=\"/:userId/places\" element={<UserPlaces />} end></Route>\n        <Route path=\"/auth\" element={<Auth  />} ></Route>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <AuthContext.Provider\n        value={{\n          isLoggedIn: !!token,\n          token: token,\n          userId: userId,\n          login: login,\n          logout: logout,\n        }}\n      >\n        <MainNavigation />\n        <main>\n          {\" \"}\n          <Suspense\n            fallback={\n              <div className=\"center\">\n                <LoadingSpinner />\n              </div>\n            }\n          >\n            <Routes>{routes}</Routes>\n          </Suspense>\n        </main>\n      </AuthContext.Provider>\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}